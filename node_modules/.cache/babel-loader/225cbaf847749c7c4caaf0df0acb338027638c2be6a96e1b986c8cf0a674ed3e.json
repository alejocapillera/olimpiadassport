{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport { BButton, BCollapse, BNav, BNavItem } from \"bootstrap-vue-3\";\nimport { vBToggle } from \"bootstrap-vue-3\";\nexport default {\n  components: {\n    BButton,\n    BCollapse,\n    BNav,\n    BNavItem\n  },\n  directives: {\n    \"b-toggle\": vBToggle\n  },\n  data() {\n    return {\n      isLoggedIn: false,\n      userRole: null\n    };\n  },\n  methods: {\n    logout() {\n      localStorage.removeItem(\"token\");\n      this.$router.push(\"/home\");\n      this.isLoggedIn = false;\n      this.userRole = null;\n    },\n    parseJwt(token) {\n      try {\n        const base64Url = token.split(\".\")[1];\n        const base64 = decodeURIComponent(atob(base64Url).split(\"\").map(function (c) {\n          return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\n        }).join(\"\"));\n        return JSON.parse(base64);\n      } catch (e) {\n        return null;\n      }\n    },\n    updateUserStatus() {\n      const token = localStorage.getItem(\"token\");\n      if (token) {\n        this.isLoggedIn = true;\n        const user = this.parseJwt(token);\n        if (user && user.role === \"ipersonal\") {\n          this.userRole = \"personal\";\n        } else {\n          this.userRole = \"cliente\";\n        }\n      } else {\n        this.isLoggedIn = false;\n        this.userRole = null;\n      }\n    }\n  },\n  mounted() {\n    this.updateUserStatus();\n  },\n  watch: {\n    $route() {\n      this.updateUserStatus();\n    }\n  }\n};","map":{"version":3,"names":["BButton","BCollapse","BNav","BNavItem","vBToggle","components","directives","data","isLoggedIn","userRole","methods","logout","localStorage","removeItem","$router","push","parseJwt","token","base64Url","split","base64","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","e","updateUserStatus","getItem","user","role","mounted","watch","$route"],"sources":["C:\\Users\\estudiante\\Desktop\\sport-tienda\\src\\components\\MenuPrincipal.vue"],"sourcesContent":["<template>\n  <div>\n    <header class=\"header\">\n      <b-container fluid>\n        <b-row class=\"align-items-center\">\n          <b-col class=\"d-flex align-items-center\">\n            <router-link to=\"/\">\n              <img src=\"@/assets/logo.png\" alt=\"Logo\" class=\"logo\" />\n            </router-link>\n          </b-col>\n          <b-col class=\"d-none d-md-flex justify-content-end\">\n            <router-link to=\"/home\">\n              <b-button class=\"menu-button mr-2\">\n                <i class=\"fa-solid fa-home\"></i> Inicio\n              </b-button>\n            </router-link>\n            <router-link to=\"/miscompras\">\n              <b-button class=\"menu-button mr-2\">\n                <i class=\"fa-solid fa-cart-shopping\"></i> Mis compras\n              </b-button>\n            </router-link>\n            <template v-if=\"isLoggedIn && userRole === 'personal'\">\n              <router-link to=\"/productosventas\">\n                <b-button class=\"menu-button\">\n                  <i class=\"fa-solid fa-box\"></i> Productos\n                </b-button>\n              </router-link>\n            </template>\n            <template v-if=\"isLoggedIn\">\n              <b-button class=\"menu-button mr-2\" @click=\"logout\">\n                <i class=\"fa-solid fa-sign-out-alt\"></i> Cerrar sesi贸n\n              </b-button>\n            </template>\n            <template v-else>\n              <router-link to=\"/login\">\n                <b-button class=\"menu-button mr-2\">\n                  <i class=\"fa-solid fa-user\"></i> Iniciar sesi贸n\n                </b-button>\n              </router-link>\n            </template>\n          </b-col>\n          <b-col class=\"d-md-none text-right\">\n            <b-button v-b-toggle.menu-collapse class=\"menu-toggle\">\n              <i class=\"fa-solid fa-bars\"></i>\n            </b-button>\n          </b-col>\n        </b-row>\n\n        <b-collapse id=\"menu-collapse\" class=\"d-md-none\">\n          <b-nav vertical>\n            <b-nav-item>\n              <router-link to=\"/home\">\n                <b-button class=\"menu-button\">\n                  <i class=\"fa-solid fa-home\"></i> Inicio\n                </b-button>\n              </router-link>\n            </b-nav-item>\n            <b-nav-item>\n              <router-link to=\"/miscompras\">\n                <b-button class=\"menu-button\">\n                  <i class=\"fa-solid fa-cart-shopping\"></i> Mis compras\n                </b-button>\n              </router-link>\n            </b-nav-item>\n            <template v-if=\"isLoggedIn && userRole === 'personal'\">\n              <b-nav-item>\n                <router-link to=\"/productosventas\">\n                  <b-button class=\"menu-button\">\n                    <i class=\"fa-solid fa-box\"></i> Productos\n                  </b-button>\n                </router-link>\n              </b-nav-item>\n            </template>\n            <b-nav-item v-if=\"isLoggedIn\">\n              <b-button class=\"menu-button\" @click=\"logout\">\n                <i class=\"fa-solid fa-sign-out-alt\"></i> Cerrar sesi贸n\n              </b-button>\n            </b-nav-item>\n            <b-nav-item v-else>\n              <router-link to=\"/login\">\n                <b-button class=\"menu-button\">\n                  <i class=\"fa-solid fa-user\"></i> Iniciar sesi贸n\n                </b-button>\n              </router-link>\n            </b-nav-item>\n          </b-nav>\n        </b-collapse>\n      </b-container>\n    </header>\n  </div>\n</template>\n\n<script>\nimport { BButton, BCollapse, BNav, BNavItem } from \"bootstrap-vue-3\";\nimport { vBToggle } from \"bootstrap-vue-3\";\n\nexport default {\n  components: {\n    BButton,\n    BCollapse,\n    BNav,\n    BNavItem,\n  },\n  directives: {\n    \"b-toggle\": vBToggle,\n  },\n  data() {\n    return {\n      isLoggedIn: false,\n      userRole: null,\n    };\n  },\n  methods: {\n    logout() {\n      localStorage.removeItem(\"token\");\n      this.$router.push(\"/home\");\n      this.isLoggedIn = false;\n      this.userRole = null;\n    },\n    parseJwt(token) {\n      try {\n        const base64Url = token.split(\".\")[1];\n        const base64 = decodeURIComponent(\n          atob(base64Url)\n            .split(\"\")\n            .map(function (c) {\n              return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\n            })\n            .join(\"\")\n        );\n        return JSON.parse(base64);\n      } catch (e) {\n        return null;\n      }\n    },\n    updateUserStatus() {\n      const token = localStorage.getItem(\"token\");\n      if (token) {\n        this.isLoggedIn = true;\n        const user = this.parseJwt(token);\n        if (user && user.role === \"ipersonal\") {\n          this.userRole = \"personal\";\n        } else {\n          this.userRole = \"cliente\";\n        }\n      } else {\n        this.isLoggedIn = false;\n        this.userRole = null;\n      }\n    },\n  },\n  mounted() {\n    this.updateUserStatus();\n  },\n  watch: {\n    $route() {\n      this.updateUserStatus();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.header {\n  background-color: #0a641a;\n  padding: 10px 0;\n  z-index: 1000000;\n}\n\n.logo {\n  width: 180px;\n  cursor: pointer;\n}\n\n.menu-button {\n  font-weight: bold;\n  color: #fff;\n  background: #0a641a;\n  border: none;\n  font-size: 1.2rem;\n  transition: color 0.3s ease;\n}\n\n.menu-button:hover {\n  background: #0a641a;\n  color: #ff9800;\n}\n\n.menu-button i {\n  background: #0a641a;\n  margin-right: 0.5rem;\n  color: #ff9800;\n}\n\n.menu-toggle {\n  font-size: 1.5rem;\n  background: #0a641a;\n  color: #ff9800;\n  border: none;\n  position: relative;\n  margin-right: -0.5rem;\n}\n\n.b-col.d-md-none.text-right {\n  padding-right: 0;\n  text-align: right;\n}\n\n.b-collapse {\n  background-color: #0a641a;\n  padding: 10px;\n}\n\n@media (max-width: 768px) {\n  .menu-button {\n    width: 100%;\n    background: #0a641a;\n    text-align: left;\n  }\n}\n</style>\n"],"mappings":";;AA6FA,SAASA,OAAO,EAAEC,SAAS,EAAEC,IAAI,EAAEC,QAAO,QAAS,iBAAiB;AACpE,SAASC,QAAO,QAAS,iBAAiB;AAE1C,eAAe;EACbC,UAAU,EAAE;IACVL,OAAO;IACPC,SAAS;IACTC,IAAI;IACJC;EACF,CAAC;EACDG,UAAU,EAAE;IACV,UAAU,EAAEF;EACd,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE,KAAK;MACjBC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,MAAMA,CAAA,EAAG;MACPC,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;MAChC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,OAAO,CAAC;MAC1B,IAAI,CAACP,UAAS,GAAI,KAAK;MACvB,IAAI,CAACC,QAAO,GAAI,IAAI;IACtB,CAAC;IACDO,QAAQA,CAACC,KAAK,EAAE;MACd,IAAI;QACF,MAAMC,SAAQ,GAAID,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACrC,MAAMC,MAAK,GAAIC,kBAAkB,CAC/BC,IAAI,CAACJ,SAAS,EACXC,KAAK,CAAC,EAAE,EACRI,GAAG,CAAC,UAAUC,CAAC,EAAE;UAChB,OAAO,GAAE,GAAI,CAAC,IAAG,GAAIA,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,EAAEC,KAAK,CAAC,CAAC,CAAC,CAAC;QAC9D,CAAC,EACAC,IAAI,CAAC,EAAE,CACZ,CAAC;QACD,OAAOC,IAAI,CAACC,KAAK,CAACV,MAAM,CAAC;MAC3B,EAAE,OAAOW,CAAC,EAAE;QACV,OAAO,IAAI;MACb;IACF,CAAC;IACDC,gBAAgBA,CAAA,EAAG;MACjB,MAAMf,KAAI,GAAIL,YAAY,CAACqB,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAIhB,KAAK,EAAE;QACT,IAAI,CAACT,UAAS,GAAI,IAAI;QACtB,MAAM0B,IAAG,GAAI,IAAI,CAAClB,QAAQ,CAACC,KAAK,CAAC;QACjC,IAAIiB,IAAG,IAAKA,IAAI,CAACC,IAAG,KAAM,WAAW,EAAE;UACrC,IAAI,CAAC1B,QAAO,GAAI,UAAU;QAC5B,OAAO;UACL,IAAI,CAACA,QAAO,GAAI,SAAS;QAC3B;MACF,OAAO;QACL,IAAI,CAACD,UAAS,GAAI,KAAK;QACvB,IAAI,CAACC,QAAO,GAAI,IAAI;MACtB;IACF;EACF,CAAC;EACD2B,OAAOA,CAAA,EAAG;IACR,IAAI,CAACJ,gBAAgB,CAAC,CAAC;EACzB,CAAC;EACDK,KAAK,EAAE;IACLC,MAAMA,CAAA,EAAG;MACP,IAAI,CAACN,gBAAgB,CAAC,CAAC;IACzB;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}